<!doctype html><html><head><title>Nes's Sealed Sim v3.1</title><meta charset="utf-8"><meta name="theme-color"content="#999999"id="theme-color"><link href="https://i.postimg.cc/x1ptv5zb/astolfo-icon.png"rel="shortcut icon"type="image/png"><link href="https://unpkg.com/@saeris/typeface-beleren-bold@latest/index.css"rel="stylesheet"type="text/css"><style>:root{--theme-color:transparent}body,html{margin:0;width:100%;height:100%;background-color:var(--theme-bg);color:var(--theme-color)}*{font-family:"Beleren Bold"}#checker,#done,#list-editor,#loading,#selection,body{display:flex;align-items:center;justify-content:center}#done,#list-editor,#loading,#selection{max-width:0;overflow-x:hidden;transition:max-width .3s linear}#loading,#selection{width:40vw;height:30vh}#selection{background:rgba(127,127,127,.4)}#loading-card,#p,#set-title,.checklabel,button,select{font-size:2.5vh}#loading{background:rgba(127,127,127,.3);cursor:progress}.spacer{width:10px;height:10px}#add-in,#checker,#remove-out,button,select{color:inherit;background:0 0;border:2px solid var(--theme-color);padding:1vh;height:7vh;border-radius:1vh;display:flex;box-sizing:border-box;box-shadow:0 0 10px var(--shadow-color)}#checker,#theme-select,.card-face,button,select{cursor:pointer}#checker,button{width:7vh}#loading{text-align:center;flex-direction:column}#done{height:100%;width:60vw;flex-direction:column}#list-editor{width:100%;height:100%;flex-direction:row;justify-content:space-between;align-items:center}#add-in,#remove-out{white-space:pre;height:45%;width:100%;overflow-y:scroll;background:#333;scrollbar-width:none}#add-in{color:var(--pos-dark)}#mythic{display:none;background:grey;border:none}button{display:flex;justify-content:center;align-items:center}#checklabel{text-decoration:none;text-align:center}select{appearance:none}select:focus{outline:0}.card-face{display:flex;justify-content:flex-start;align-items:flex-start}.card-face{position:relative;width:9vw;height:12.5vw}.card-face img{width:100%;height:100%;border-radius:4%}.card-face img:nth-of-type(2){display:none}.card-face.flipped img:first-of-type{display:none}.card-face.flipped img:last-of-type{display:block}.hide{display:none}.add-button,.flip-button,.remove-button{position:absolute;bottom:0;z-index:2;height:3vh;color:#000;border-color:var(--lighght);background-color:var(--lighght);box-shadow:0 0 10px var(--lighght);font-size:initial}.add-button,.remove-button{left:0}.flip-button{right:0}#displays{display:flex;flex-direction:column;height:100%;width:75%;margin:0}#add-div,#remove-div{height:50%;max-height:50%;overflow-y:scroll;scrollbar-width:none;display:flex;flex-wrap:wrap;justify-content:flex-start;align-items:flex-start;width:100%;border:2px solid var(--theme-color);box-shadow:0 0 10px var(--theme-color);border-radius:1vh}#add-div,#add-in{background:url(https://c2.scryfall.com/file/scryfall-symbols/card-symbols/PW.svg),var(--pos);background-repeat:no-repeat;background-size:contain;background-position:center;background-attachment:scroll}#remove-div,#remove-out{background:url(https://c2.scryfall.com/file/scryfall-symbols/card-symbols/PW.svg),var(--neg);background-repeat:no-repeat;background-size:contain;background-position:center;background-attachment:scroll}#add-div .add-button,#remove-div .remove-button{display:none}#info{width:24.5%;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:space-between}#canvas-holder{height:0;overflow:hidden;padding-top:calc(680 / 488 * 100%);position:relative;width:100%}#canvas{position:absolute;top:0;left:0;width:100%;height:100%;border-radius:3vh}#finish{width:50%}#basics{width:100%;display:flex}#basics button{width:20%;font-size:initial}#count{color:var(--theme-color);text-shadow:0 0 10px var(--theme-color);font-size:10vh;text-align:center}::-webkit-scrollbar{width:0}#theme-select{color:var(--theme-color);position:absolute;top:0;left:0}progress::-webkit-progress-bar{background-color:rgba(0,0,0,.5);width:100%}progress::-webkit-progress-value{background-color:var(--theme-color)!important}progress{background-color:rgba(0,0,0,.5)}progress::-moz-progress-bar{background-color:var(--theme-color)!important}#selection{flex-direction:column}#selection-inner{display:flex;justify-content:center;align-items:center}#selection-title{display:flex;justify-content:center;align-items:center;width:100%}#title{font-size:2.5vw;overflow:hidden;max-height:50px;white-space:nowrap;text-align:center;display:flex}#title-symbol{width:80px;height:auto}</style></head><div id="theme-select">Theme</div><div id="selection"><div id="selection-title"><img id="title-symbol"title="ALL WILL BE ONE"src="https://i.postimg.cc/x1ptv5zb/astolfo-icon.png"><div id="title">&nbsp;Neson&iacute;n's Sealed Sim</div></div><div class="spacer"></div><div class="spacer"></div><div id="selection-inner"><select id="setlist"></select><button id="checker"><abbr id="checklabel"title="Basic Land Type">THB</abbr></button><button type="button"onclick="go()">Go</button></div></div><div id="loading"><div id="p">Loading: <span id="amt">0</span> / 95</div><div class="spacer"></div><progress id="prog"value="0"max="95"></progress><div class="spacer"></div><em id="loading-card">...</em></div><div id="list-editor"><div id="displays"><div id="add-div"></div><div id="remove-div"></div></div><div id="info"><div id="canvas-holder"><canvas id="canvas"class="hide"></canvas></div><div id="basics"><button id="plains"onclick="addBasic(0)"onmouseover="showBasic(0)">Add<br>Plains</button><button id="island"onclick="addBasic(1)"onmouseover="showBasic(1)">Add<br>Island</button><button id="swamp"onclick="addBasic(2)"onmouseover="showBasic(2)">Add<br>Swamp</button><button id="mountain"onclick="addBasic(3)"onmouseover="showBasic(3)">Add<br>Mountain</button><button id="forest"onclick="addBasic(4)"onmouseover="showBasic(4)">Add<br>Forest</button></div><div id="set-title"></div><div id="count"></div><button id="finish"onclick="done()">Done</button></div></div><div id="done"><textarea id="add-in"></textarea><textarea id="remove-out"></textarea></div><script defer>const canvas=document.getElementById("canvas");canvas.height=680,canvas.width=488;const canvasCtx=canvas.getContext("2d"),maxpass=90,addDiv=document.getElementById("add-div"),removeDiv=document.getElementById("remove-div"),sortMap="W.U.B.R.G.UW.BU.BR.GR.GW.BW.RU.BG.RW.GU.BUW.BRU.BGR.GRW.GUW.RUW.BGU.BRW.GRU.BGW.BRUW.BGRU.BGRW.GRUW.BRUW.BGRUW.C.L.A".split("."),mythicless="eve.shm.mor.lrw.10e.fut.plc.tsb.tsp.csp.dis.gpt.rav.9ed.sok.bok.chk.5dn.dst.mrd.8ed.scg.lgn.ons.jud.tor.ody.apc.7ed.pls.inv.pcy.nem.mmq.uds.6ed.ulg.usg.exo.sth.tmp.wth.5ed.vis.mir.all.hml.ice.4bb.4ed.fem.drk.sum.leg.fbb.3ed.atq.arn.2ed.leb.lea".split("."),special=[{search:"not:funny not:extra",set:"",name:"Magic 1993-"+(new Date).getFullYear()},{search:"(t:artifact or t:basic) not:funny",set:"",name:"Artifacts"},{search:"border:silver",set:"",name:"Silver-Bordered"},{search:"cube:grixis",set:"",name:"Grixis Cube"},{search:"cube:legacy",set:"",name:"Legacy Cube"},{search:"cube:livethedream",set:"",name:"Live the Dream"},{search:"cube:modern",set:"",name:"Modern Cube"},{search:"cube:arena",set:"",name:"Arena Draft Cube"},{search:"cube:protour",set:"",name:"Pro Tour Cube"},{search:"cube:tinkerer",set:"",name:"Tinkerer's Cube"},{search:"cube:twisted",set:"",name:"Twisted Color Pie"},{search:"cube:uncommon",set:"",name:"Uncommon Cube"},{search:"cube:vintage",set:"",name:"Vintage Cube"}],hardcodedBasics=[[["Plains","a9891b7b-fc52-470c-9f74-292ae665f378"],["Island","acf7b664-3e75-4018-81f6-2a14ab59f258"],["Swamp","02cb5cfd-018e-4c5e-bef1-166262aa5f1d"],["Mountain","53fb7b99-9e47-46a6-9c8a-88e28b5197f1"],["Forest","32af9f41-89e2-4e7a-9fec-fffe79cae077"]],[["Plains","7a2c8b8e-2e28-4f10-b04f-9b313c60c0bb"],["Island","105b2118-b22c-4ef5-bac7-836db4b8b9ee"],["Swamp","f108b0fb-420a-422d-ae85-9a99c0f73169"],["Mountain","44c1a862-00fc-4e79-a83a-289fef81503a"],["Forest","f8772631-d4a1-440d-ac89-ac6659bdc073"]],[]];let basics,basicType=+localStorage.getItem("basicType"),setName="";async function go(){document.getElementById("theme-select").style.display="none",document.getElementById("selection").style.maxWidth="0",document.getElementById("loading").style.maxWidth="40vw";let e=document.getElementById("setlist").value;/set=/.test(e)&&(setName=e.split("=")[1]);let t=[],a=0,n=mythicless.indexOf(setName)<0;for(localStorage.setItem("basicType",basicType);a<90;){let s=await fetch(`https://api.scryfall.com/cards/random?q=${getSearchString(a,n,e)}%20in:booster`).then(e=>e.json());document.getElementById("amt").innerHTML=a+1,document.getElementById("prog").value=a+1,document.getElementById("loading-card").innerHTML=s.name,await wait(100);let c,i=[];s.card_faces&&s.card_faces[0].image_uris?(i[0]=await getImage(s.card_faces[0].image_uris.normal),i[0].title=s.card_faces[0].oracle_text,await wait(100),i[1]=await getImage(s.card_faces[1].image_uris.normal),i[1].title=s.card_faces[1].oracle_text):(i[0]=await getImage(s.image_uris.normal),i[0].title=s.oracle_text),c=s.color_identity.length<1?"C":s.color_identity.sort().join(""),/land/gi.test(s.type_line)&&!/sorcery|instant|creature|artifact|enchantment/gi.test(s.type_line)&&(c="L"),a>=84&&(c="A"),t.push({name:s.name,faces:i,ci:c}),a++,await wait(100)}basics=await generateBasics(basicType,a),t.sort((e,t)=>{let a=sortMap.indexOf(e.ci),n=sortMap.indexOf(t.ci);return a<n?-1:a>n?1:e.name.localeCompare(t.name,"en",{sensitivity:"base"})}),t.forEach((e,t)=>{e.div=makeDiv(e,t),removeDiv.appendChild(e.div)}),removeDiv.children[0].dispatchEvent(new Event("mouseover")),document.getElementById("loading").style.maxWidth="0",document.getElementById("list-editor").style.maxWidth="100%",document.getElementById("set-title").innerHTML=document.getElementById("setlist").options[document.getElementById("setlist").selectedIndex].text+(setName?` (${setName.toUpperCase()})`:""),setTimeout(()=>{canvas.classList.remove("hide")},700),updateCount()}function done(){let e=[...document.getElementById("add-div").children].map(e=>e.getAttribute("data-name")),t=[...document.getElementById("remove-div").children].map(e=>e.getAttribute("data-name"));document.getElementById("add-in").value=e.join("\n"),document.getElementById("remove-out").value=t.join("\n"),document.getElementById("finish").style.display="none",document.getElementById("list-editor").style.maxWidth="0",document.getElementById("done").style.maxWidth="60vw"}function getImage(e){return new Promise(t=>{let a=new Image;a.onload=()=>{t(a)},a.src=e})}async function addBasic(e){let t=await getImage(basics[e][2]),a=document.createElement("div");a.classList.add("card-face"),a.setAttribute("data-name",basics[e][0]+"("+["THB","UST",setName][basicType]+")"),a.style.order="90",a.addEventListener("mouseover",(function(){canvasCtx.drawImage(t,0,0)})),a.addEventListener("dblclick",()=>{addDiv.removeChild(a),updateCount()});let n=document.createElement("button");n.classList.add("remove-button"),n.addEventListener("click",()=>{addDiv.removeChild(a),updateCount()}),n.innerHTML="\u2796",a.appendChild(n),a.appendChild(t),addDiv.appendChild(a),updateCount()}function showBasic(e){getImage(basics[e][2]).then(e=>canvasCtx.drawImage(e,0,0))}function makeDiv({faces:e,name:t},a){let n=document.createElement("div");function s(){n.classList.contains("flipped")?canvasCtx.drawImage(e[1],0,0):canvasCtx.drawImage(e[0],0,0)}n.classList.add("card-face"),n.setAttribute("data-name",t+(setName?"("+setName.toUpperCase()+")":"")),n.style.order=""+(a+1),n.addEventListener("mouseover",s),n.addEventListener("dblclick",()=>{addDiv.contains(n)?removeDiv.appendChild(n):addDiv.appendChild(n),updateCount()});let c=document.createElement("button");c.classList.add("add-button"),c.addEventListener("click",()=>{addDiv.appendChild(n),updateCount()}),c.innerHTML="\u2795";let i=document.createElement("button");if(i.classList.add("remove-button"),i.addEventListener("click",()=>{removeDiv.appendChild(n),updateCount()}),n.appendChild(c),n.appendChild(i),i.innerHTML="\u2796",e.length>1){let e=document.createElement("button");e.classList.add("flip-button"),e.addEventListener("click",()=>{n.classList.contains("flipped")?n.classList.remove("flipped"):n.classList.add("flipped"),s()}),e.innerHTML="flip",n.appendChild(e)}return e.forEach(e=>n.appendChild(e)),n}function wait(e){return new Promise(t=>setTimeout(t,e))}function getSearchString(e,t,a){let n="";if(/tsp/.test(a)&&e<6)return"set:tsb%20";switch(!0){case e<60:n="c";break;case e>=60&&e<78:n="u";break;case e>=78&&e<84:n=8*Math.random()<1&&t?"m":"r";break;default:return/set=/.test(a)?a+"%20t:basic":"s:guru"}return a+"%20-t:basic%20r:"+n}function updateCount(){setTimeout(()=>{document.getElementById("count").innerHTML=document.getElementById("add-div").children.length},5)}async function generateBasics(e,t){let a="",n=document.getElementById("setlist").value;/set=/.test(n)&&(a=n);let s=JSON.parse(JSON.stringify(hardcodedBasics))[e];if(fetch(`https://api.scryfall.com/cards/random?q=${a}%20t:basic`).then(()=>!0,()=>!1)||(a="s:guru"),e<s.length-1)for(let e=0;e<s.length;e++)document.getElementById("amt").innerHTML=t+1,document.getElementById("prog").value=t+1,await wait(100),document.getElementById("loading-card").innerHTML=s[e][0],s[e][2]="data:image/jpeg;base64,"+await fetch(`https://api.scryfall.com/cards/${s[e][1]}?format=image&version=normal`).then(e=>e.arrayBuffer()).then(e=>btoa(String.fromCharCode(...new Uint8Array(e)))),t++;else{s=[["Plains",null],["Island",null],["Swamp",null],["Mountain",null],["Forest",null]];for(let e=0;e<s.length;e++)document.getElementById("amt").innerHTML=t+1,document.getElementById("prog").value=t+1,await wait(100),document.getElementById("loading-card").innerHTML=s[e][0],s[e][2]="data:image/jpeg;base64,"+await fetch(`https://api.scryfall.com/cards/random?q=${a}%20name=${s[e][0]}&format=image&version=normal`).then(e=>e.arrayBuffer()).then(e=>btoa(String.fromCharCode(...new Uint8Array(e)))),t++}return s}basicType=null!==basicType&&basicType==basicType?(basicType+hardcodedBasics.length-1)%hardcodedBasics.length:0,fetch("https://api.scryfall.com/sets").then(e=>e.json()).then(e=>e.data.filter(e=>/expansion|core|draft_innovation|masters/.test(e.set_type)&&!/cmr|tsb/.test(e.code)&&new Date(e.released_at).getTime()<=(new Date).getTime()&&!/foils|remastered|foreign|rinascimento/i.test(e.name)).map(e=>(e.search="set="+e.code,/masters/.test(e.set_type)&&(e.search="set:"+e.code),e)).concat(special)).then(e=>{document.getElementById("setlist").innerHTML=e.map(e=>`<option value="${e.search}">${e.name}</option>`).join("\n")}).then(()=>{document.getElementById("selection").style.maxWidth="40vw"}).catch(()=>{throw alert("Cannot connect to Scryfall.")}),document.getElementById("checker").addEventListener("click",()=>{basicType=(basicType+hardcodedBasics.length+1)%hardcodedBasics.length,document.getElementById("checklabel").innerHTML=["THB","UST","SET"][basicType]}),document.getElementById("checker").click();const themeList=[["#ffffff","black","transparent","transparent","var(--theme-bg)","var(--theme-color)","transparent"],["#f266a5","white","rgba(255, 255, 255, 0.8)","rgba(0, 0, 0, 0.8)","var(--theme-color)","black","white"],["#099b74","black","#09799b","#099b2b","var(--pos)","var(--theme-color)","transparent"],["#000000","#9ecaed","#446","#644","var(--theme-color)","var(--theme-color)","var(--theme-color)"],["#ffffcc","#9ba38b","#ccccff","#ffcccc","var(--theme-color)","var(--theme-color)","var(--theme-color)"]];let theme=+localStorage.getItem("theme");null!==theme&&theme==theme||console.log(theme=0),document.getElementById("theme-select").addEventListener("click",()=>{theme=(theme+themeList.length+1)%themeList.length,localStorage.setItem("theme",theme),document.getElementById("theme-color").setAttribute("content",themeList[theme][0]),document.documentElement.style=`--theme-bg:${themeList[theme][0]};--theme-color:${themeList[theme][1]};--pos:${themeList[theme][2]};--neg:${themeList[theme][3]};--lighght:${themeList[theme][4]};--pos-dark:${themeList[theme][5]};--shadow-color:${themeList[theme][6]}`}),document.getElementById("theme-color").setAttribute("content",themeList[theme][0]),document.documentElement.style=`--theme-bg:${themeList[theme][0]};--theme-color:${themeList[theme][1]};--pos:${themeList[theme][2]};--neg:${themeList[theme][3]};--lighght:${themeList[theme][4]};--pos-dark:${themeList[theme][5]};--shadow-color:${themeList[theme][6]}`;</script><!-- Created by Nesonin --></html>
